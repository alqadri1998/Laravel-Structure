<?phpnamespace App\Traits;use App\Models\Role;trait PluckPivot{    public function pluckPivot($collection)    {        if (count($collection) > 0) {            if (is_a($collection, 'Illuminate\Database\Eloquent\Collection')) {                foreach ($collection as $key => $obj) {                    $collectionLanguages = $obj->languages->pluck('pivot')->all();                    foreach ($collectionLanguages as $languageKey => $val) {                        if ($val->language_id == 1) {                            $collectionLanguages[$languageKey]->short_code = 'ar';                        } else {                            $collectionLanguages[$languageKey]->short_code = 'en';                        }                    }                    unset($collection[$key]->languages);                    $collection[$key]->languages = $collectionLanguages;                }            } else {                unset($collection->languages);                foreach ($collection->languages as $key => $language) {                    $collection->languages[$key] = $collection->languages[$key]->pivot;                    $collection->languages[$key]->short_code = $language->short_code;                }            }        }        return $collection;    }    public function pluckPivotWithLanguageKeys($collection)    {        $languages = [];        if (count($collection) > 0) {            if (is_a($collection, 'Illuminate\Database\Eloquent\Collection')) {                foreach ($collection as $key => $obj) {                    $collectionLanguages = $obj->languages->pluck('pivot')->all();                    foreach ($collectionLanguages as $languageKey => $val) {                        if ($val->language_id == 1) {                            $collectionLanguages[$languageKey]->short_code = 'ar';                            $languages[$val->language_id] = $collectionLanguages[$languageKey];                        } else {                            $collectionLanguages[$languageKey]->short_code = 'en';                            $languages[$val->language_id] = $collectionLanguages[$languageKey];                        }                    }                    unset($collection[$key]->languages);                    $collection[$key]->languages = $languages;                }            } else {                $data = $collection->languages->pluck('pivot')->all();                foreach ($data as $key => $val) {                    if ($val->language_id == 1) {                        $data[$val->language_id]->short_code = 'ar';                    } else {                        $data[$val->language_id]->short_code = 'en';                    }                }                unset($collection->languages);                $collection->languages = $data;            }        }        return $collection;    }}